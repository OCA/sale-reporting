<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template
        id="report_account_move_inherit"
        inherit_id="account.report_invoice_document"
    >
        <!-- This targets the span "Amount" to replace it with another conditional string, see below -->
        <xpath expr="//th[@name='th_subtotal']/span[1]" position="attributes">
            <attribute name="style">display:none;</attribute>
            <attribute name="groups" />
        </xpath>

        <!-- This targets the span "Total Price" to replace it withanother conditional string, see below -->
        <xpath expr="//th[@name='th_subtotal']/span[2]" position="attributes">
            <attribute name="style">display:none;</attribute>
            <attribute name="groups" />
        </xpath>

        <!-- See above -->
        <xpath expr="//th[@name='th_subtotal']/span[1]" position="after">
            <span
                t-if="(doc or o) and (doc or o).partner_id.report_show_line_subtotals == 'tax_excluded'"
            >Total Price Tax Free</span>
        </xpath>
        <!-- See above -->
        <xpath expr="//th[@name='th_subtotal']/span[2]" position="after">
            <span
                t-if="(doc or o) and (doc or o).partner_id.report_show_line_subtotals == 'tax_included'"
            >Total Price Tax Included</span>
        </xpath>

        <xpath
            expr="//t[@t-set='current_subtotal' and @groups='account.group_show_line_subtotals_tax_excluded']"
            position="attributes"
        >
            <attribute
                name="t-if"
            >(doc or o) and (doc or o).partner_id.report_show_line_subtotals == 'tax_excluded'</attribute>
            <attribute name="groups" />
        </xpath>
        <xpath
            expr="//t[@t-set='current_subtotal'and @groups='account.group_show_line_subtotals_tax_included']"
            position="attributes"
        >
            <attribute
                name="t-if"
            >(doc or o) and (doc or o).partner_id.report_show_line_subtotals == 'tax_included'</attribute>
            <attribute name="groups" />
        </xpath>

        <xpath
            expr="//span[@class='text-nowrap' and @t-field='line.price_subtotal' and @groups='account.group_show_line_subtotals_tax_excluded']"
            position="attributes"
        >
            <attribute
                name="t-if"
            >(doc or o) and (doc or o).partner_id.report_show_line_subtotals == 'tax_excluded'</attribute>
            <attribute name="groups" />
        </xpath>
        <xpath
            expr="//span[@class='text-nowrap' and @t-field='line.price_total' and @groups='account.group_show_line_subtotals_tax_included']"
            position="attributes"
        >
            <attribute
                name="t-if"
            >(doc or o) and (doc or o).partner_id.report_show_line_subtotals == 'tax_included'</attribute>
            <attribute name="groups" />
        </xpath>

        <xpath expr="//th[@name='th_priceunit']/span" position="attributes">
            <attribute name="style">display:none;</attribute>
        </xpath>
        <xpath expr="//th[@name='th_priceunit']/span" position="after">
            <span>Price Unit Tax Free</span>
        </xpath>

    </template>

    <template id="document_tax_total_inherit" inherit_id="account.document_tax_totals">
        <xpath expr="//t[@t-as='subtotal']" position="attributes">
        <!-- This is used for purchase_order (which requires o.) and sale_order (which requires doc.) -->
            <attribute
                name="t-if"
            >doc.partner_id.show_tax_calculation if doc else o.partner_id.show_tax_calculation</attribute>
        </xpath>
    </template>

</odoo>
